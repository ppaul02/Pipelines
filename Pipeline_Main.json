{"id": "/subscriptions/0e40d638-6ee2-42fa-83d5-78641df4b3cb/resourceGroups/DataQualityPOC/providers/Microsoft.Synapse/workspaces/synapse-etl-poc/pipelines/Pipeline_Main", "name": "Pipeline_Main", "type": "Microsoft.Synapse/workspaces/pipelines", "etag": "8900a393-0000-0100-0000-627c832b0000", "activities": [{"name": "GetSourceDetails", "type": "Lookup", "depends_on": [], "user_properties": [], "policy": {"timeout": "7.00:00:00", "retry": 0, "retry_interval_in_seconds": 30, "secure_input": false, "secure_output": false}, "source": {"queryTimeout": "02:00:00", "partitionOption": "None", "type": "CopySource"}, "dataset": {"type": "DatasetReference", "reference_name": "Source_Control_Table", "parameters": {}}, "first_row_only": false}, {"name": "ForEachSourceObject", "type": "ForEach", "depends_on": [{"activity": "GetSourceDetails", "dependency_conditions": ["Succeeded"]}], "user_properties": [], "items": {"type": "Expression", "value": "@activity('GetSourceDetails').output.value"}, "activities": [{"name": "SwitchBasedOn_ObjectType", "type": "Switch", "depends_on": [{"activity": "GetSQLDBServerName", "dependency_conditions": ["Succeeded"]}, {"activity": "GetSQLDBPassword", "dependency_conditions": ["Succeeded"]}, {"activity": "GetSQLDBUsername", "dependency_conditions": ["Succeeded"]}, {"activity": "GetSQLDB", "dependency_conditions": ["Succeeded"]}], "user_properties": [], "on": {"type": "Expression", "value": "@item().object_type"}, "cases": [{"value": "sql", "activities": [{"name": "SQL_DB_Pipeline", "type": "ExecutePipeline", "depends_on": [], "user_properties": [], "pipeline": {"type": "PipelineReference", "reference_name": "Pipeline_CSV_Ingestion_Testing"}, "parameters": {"sourcetableschema": {"value": "@variables('var_sch')", "type": "Expression"}, "objectname": {"value": "@variables('var_obj')", "type": "Expression"}, "source_object_name": {"value": "@item().source_object_name", "type": "Expression"}, "target_object_name": {"value": "@item().target_object_name", "type": "Expression"}, "object_type": {"value": "@item().object_type", "type": "Expression"}, "target_container_name": {"value": "@item().target_container_name", "type": "Expression"}, "target_relative_path": {"value": "@item().target_relative_path", "type": "Expression"}, "sqlservername": {"value": "@activity('GetSQLDBServerName').output.value", "type": "Expression"}, "sqldbusername": {"value": "@activity('GetSQLDBUsername').output.value", "type": "Expression"}, "jdbcDatabase": {"value": "@activity('GetSQLDB').output.value", "type": "Expression"}, "password": {"value": "@activity('GetSQLDBPassword').output.value", "type": "Expression"}, "Run_Environment": {"value": "@pipeline().parameters.Run_Environment", "type": "Expression"}, "Test_Tag": {"value": "@pipeline().parameters.Test_Tag", "type": "Expression"}}, "wait_on_completion": true}]}, {"value": "parquet", "activities": [{"name": "Parquet Pipeline", "type": "ExecutePipeline", "depends_on": [], "user_properties": [], "pipeline": {"type": "PipelineReference", "reference_name": "Pipeline_Parquet_Ingestion_Testing"}, "parameters": {"target_object_name": {"value": "@item().target_object_name", "type": "Expression"}, "source_object_name": {"value": "@item().source_object_name", "type": "Expression"}, "object_type": {"value": "@item().object_type", "type": "Expression"}, "target_container_name": {"value": "@item().target_container_name", "type": "Expression"}, "source_container_name": {"value": "@item().source_container_name", "type": "Expression"}, "target_relative_path": {"value": "@item().target_relative_path", "type": "Expression"}, "source_relative_path": {"value": "@item().source_relative_path", "type": "Expression"}, "sqlservername": {"value": "@activity('GetSQLDBServerName').output.value", "type": "Expression"}, "sqldbusername": {"value": "@activity('GetSQLDBUsername').output.value", "type": "Expression"}, "jdbcDatabase": {"value": "@activity('GetSQLDB').output.value", "type": "Expression"}, "password": {"value": "@activity('GetSQLDBPassword').output.value", "type": "Expression"}, "Run_Environment": {"value": "@pipeline().parameters.Run_Environment", "type": "Expression"}, "Test_Tag": {"value": "@pipeline().parameters.Test_Tag", "type": "Expression"}}, "wait_on_completion": true}]}]}, {"name": "GetSQLDB", "type": "WebActivity", "depends_on": [], "user_properties": [], "policy": {"timeout": "7.00:00:00", "retry": 0, "retry_interval_in_seconds": 30, "secure_input": false, "secure_output": false}, "method": "GET", "url": "https://dataqualitypockeyvault.vault.azure.net/secrets/sqldatabase/be0b7d01b9af401fbd7da1d6de73a996?api-version=7.0", "headers": {}, "authentication": {"type": "MSI", "resource": "https://vault.azure.net"}, "connect_via": {"type": "IntegrationRuntimeReference", "reference_name": "AutoResolveIntegrationRuntime"}}, {"name": "GetSQLDBUsername", "type": "WebActivity", "depends_on": [], "user_properties": [], "policy": {"timeout": "7.00:00:00", "retry": 0, "retry_interval_in_seconds": 30, "secure_input": false, "secure_output": false}, "method": "GET", "url": "https://dataqualitypockeyvault.vault.azure.net/secrets/sqldatabaseusername/c705c01f039146aab0e7b6c1692b9aa4?api-version=7.0", "headers": {}, "authentication": {"type": "MSI", "resource": "https://vault.azure.net"}, "connect_via": {"type": "IntegrationRuntimeReference", "reference_name": "AutoResolveIntegrationRuntime"}}, {"name": "GetSQLDBPassword", "type": "WebActivity", "depends_on": [], "user_properties": [], "policy": {"timeout": "7.00:00:00", "retry": 0, "retry_interval_in_seconds": 30, "secure_input": false, "secure_output": false}, "method": "GET", "url": "https://dataqualitypockeyvault.vault.azure.net/secrets/sqldbpassword/586ea114b9794bde83a3145200d6fccd?api-version=7.0", "headers": {}, "authentication": {"type": "MSI", "resource": "https://vault.azure.net"}, "connect_via": {"type": "IntegrationRuntimeReference", "reference_name": "AutoResolveIntegrationRuntime"}}, {"name": "GetSQLDBServerName", "type": "WebActivity", "depends_on": [], "user_properties": [], "policy": {"timeout": "7.00:00:00", "retry": 0, "retry_interval_in_seconds": 30, "secure_input": false, "secure_output": false}, "method": "GET", "url": "https://dataqualitypockeyvault.vault.azure.net/secrets/sqlservername/627480dc2d3c4b52bece72617b9da6f8?api-version=7.0", "headers": {}, "authentication": {"type": "MSI", "resource": "https://vault.azure.net"}, "connect_via": {"type": "IntegrationRuntimeReference", "reference_name": "AutoResolveIntegrationRuntime"}}]}], "parameters": {"Run_Environment": {"type": "string"}, "Test_Tag": {"type": "string"}}, "variables": {"var_obj": {"type": "String", "default_value": "global_superstore"}, "var_sch": {"type": "String", "default_value": "srcsqldbschema"}}, "annotations": [], "folder": {"name": "Testing_PoC"}}